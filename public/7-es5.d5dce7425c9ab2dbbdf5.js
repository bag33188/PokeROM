function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{nDdO:function(e,t,n){"use strict";n.r(t);var r=n("qfBg"),i=n("lGQG"),s=n("wHSu"),a=n("Rv5h"),o=n("vuBd"),c=n("QTu/"),l=n("Mb37"),u=n("DRYZ"),d=n("yZ9z"),b=n("fXoL"),f=n("tyNb"),h=n("NvMS"),p=n("ofXK"),m=n("FpAq"),g=n("3Pt+"),v=n("siFw"),y=n("yCtX"),w=n("DH7j"),x=n("7o/Q"),C=n("l7GE"),P=n("ZUHj"),I=n("Lhse"),k=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new R(e,this.resultSelector))}}]),e}(),R=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).iterators=[],r.active=0,r.resultSelector="function"==typeof n?n:null,r.values=i,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.iterators;Object(w.a)(e)?t.push(new S(e)):t.push("function"==typeof e[I.a]?new O(e[I.a]()):new _(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var s=!1,a=[],o=0;o<t;o++){var c=e[o],l=c.next();if(c.hasCompleted()&&(s=!0),l.done)return void n.complete();a.push(l.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),s&&n.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(x.a),O=function(){function e(t){_classCallCheck(this,e),this.iterator=t,this.nextResult=t.next()}return _createClass(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return e&&e.done}}]),e}(),S=function(){function e(t){_classCallCheck(this,e),this.array=t,this.index=0,this.length=0,this.length=t.length}return _createClass(e,[{key:I.a,value:function(){return this}},{key:"next",value:function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),e}(),_=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return _inherits(t,e),_createClass(t,[{key:I.a,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()}},{key:"subscribe",value:function(e,t){return Object(P.a)(this,this.observable,this,t)}}]),t}(C.a),M=n("3E0/"),T={prefix:"far",iconName:"check-circle",icon:[512,512,[],"f058","M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"]},U={prefix:"far",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"]},E=n("Ql4B"),D=n("t52u"),N=n("beNV"),A=n("6NWb");function L(e,t){if(1&e&&(b.Rb(0,"div",3),b.Mb(1,"spinners-bootstrap-spinner",4),b.Pb()),2&e){var n=b.gc();b.xb(1),b.nc("loading",n.loading)}}function j(e,t){if(1&e){var n=b.Sb();b.Rb(0,"button",5),b.dc("click",(function(e){return b.yc(n),b.gc().updateRoms()})),b.Ic(1," Update ROMs "),b.Pb()}}function G(e,t){if(1&e&&(b.Rb(0,"div",6),b.Mb(1,"fa-icon",7),b.Ic(2),b.Pb()),2&e){var n=b.gc();b.nc("alertType",n.romsUpdated?"success":"danger")("@fadeIn",void 0),b.xb(1),b.nc("icon",n.romsUpdated?n.faCheckCircle:n.faTimesCircle),b.xb(1),b.Kc(" ",n.romsUpdated?"ROMs successfully updated!":"Error updating ROMs, please try again later."," ")}}var F,z,B,q=((F=function(){function e(t){_classCallCheck(this,e),this.romsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.faTimesCircle=U,this.faCheckCircle=T,this.showBtn=!0,this.loading=!1,this.deleteRomsObs$=this.romsService.deleteAllRoms().pipe(Object(M.a)(500)),this.addRomsObs$=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return"function"==typeof r&&t.pop(),Object(y.a)(t,void 0).lift(new k(r))}(this.romsService.addCoreRoms().pipe(Object(M.a)(1e3)),this.romsService.addRomHacks().pipe(Object(M.a)(1e3)))}},{key:"ngOnDestroy",value:function(){this.romsUpdated&&(this.deleteRomsSub.unsubscribe(),this.addRomsSub.unsubscribe())}},{key:"updateRoms",value:function(){this.showBtn=!1,this.loading=!0,this.deleteRoms(this.addRoms.bind(this,e))}},{key:"deleteRoms",value:function(e){var t=this;this.deleteRomsSub=this.deleteRomsObs$.subscribe({error:function(e){t.loading=!1,t.romsUpdated=!1,l.a.error(e)},complete:function(){return e()}})}},{key:"addRoms",value:function(){var e=this;this.addRomsSub=this.addRomsObs$.subscribe({error:function(t){e.loading=!1,l.a.error(t)},complete:function(){e.romsUpdated=!0,e.loading=!1}})}}]),e}()).\u0275fac=function(e){return new(e||F)(b.Lb(D.a))},F.\u0275cmp=b.Fb({type:F,selectors:[["account-update-roms"]],decls:4,vars:3,consts:[["id","update-roms-spinner-container","class","mb-3",4,"ngIf"],["class","mb-3","type","button","appBtn","","btnType","warning",3,"click",4,"ngIf"],["id","roms-updated-alert-container","class","p-2","appAlert","",3,"alertType",4,"ngIf"],["id","update-roms-spinner-container",1,"mb-3"],["type","border","color","primary",3,"loading"],["type","button","appBtn","","btnType","warning",1,"mb-3",3,"click"],["id","roms-updated-alert-container","appAlert","",1,"p-2",3,"alertType"],[1,"mr-1",3,"icon"]],template:function(e,t){1&e&&(b.Ob(0),b.Gc(1,L,2,1,"div",0),b.Gc(2,j,2,0,"button",1),b.Gc(3,G,3,4,"div",2),b.Nb()),2&e&&(b.xb(1),b.nc("ngIf",t.loading),b.xb(1),b.nc("ngIf",t.showBtn),b.xb(1),b.nc("ngIf",void 0!==t.romsUpdated))},directives:[p.o,N.a,v.a,m.a,A.a],styles:["#update-roms-spinner-container[_ngcontent-%COMP%]{padding:.11rem}#roms-updated-alert-container[_ngcontent-%COMP%]{margin-bottom:.75rem}"],data:{animation:[E.a]}}),F),J=n("1kSV"),V=((B=function(){function e(t,n,r){_classCallCheck(this,e),this.modal=t,this.userService=n,this.router=r,this.isErrorDeleting=new b.m,this.loading=new b.m,this.firedOff=new b.m}return _createClass(e,[{key:"ngOnInit",value:function(){this.btnDisabled=!1}},{key:"deleteCurrentUser",value:function(){var e=this;this.firedOff.emit(!0),this.btnDisabled=!0,this.userService.deleteUser(JSON.parse(c.a.getCookie("user")).id).subscribe((function(){e.isErrorDeleting.emit(!1),e.loading.emit(!1),e.router.navigate(["/","home"]),i.a.logout()}),(function(t){e.btnDisabled=!1,e.loading.emit(!1),e.firedOff.emit(!1),e.isErrorDeleting.emit(!0),l.a.error(t)})),this.closeModal()}},{key:"closeModal",value:function(){this.modal.close("Ok click")}}]),e}()).\u0275fac=function(e){return new(e||B)(b.Lb(J.c),b.Lb(r.a),b.Lb(f.d))},B.\u0275cmp=b.Fb({type:B,selectors:[["account-delete-user-modal"]],inputs:{username:"username"},outputs:{isErrorDeleting:"isErrorDeleting",loading:"loading",firedOff:"firedOff"},decls:25,vars:4,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"hidden"],[1,"modal-footer","justify-content-start"],["type","button","appBtn","","btnType","danger",3,"disabled","click"],["type","button","appBtn","","btnType","secondary-outline",3,"click"]],template:function(e,t){1&e&&(b.Ob(0),b.Rb(1,"div",0),b.Rb(2,"h4",1),b.Ic(3,"Account deletion"),b.Pb(),b.Rb(4,"button",2),b.dc("click",(function(e){return t.modal.dismiss("Cross click")})),b.Rb(5,"span",3),b.Ic(6,"\xd7"),b.Pb(),b.Pb(),b.Pb(),b.Rb(7,"div",4),b.Rb(8,"p"),b.Rb(9,"strong"),b.Ic(10,"Are you sure you want to delete your own account "),b.Rb(11,"span",5),b.Ic(12,"("),b.Pb(),b.Ic(13),b.Rb(14,"span",5),b.Ic(15,")"),b.Pb(),b.Ic(16,"?"),b.Pb(),b.Pb(),b.Rb(17,"p"),b.Rb(18,"span"),b.Ic(19,"This operation cannot be undone."),b.Pb(),b.Pb(),b.Pb(),b.Rb(20,"div",6),b.Rb(21,"button",7),b.dc("click",(function(e){return t.deleteCurrentUser()})),b.Ic(22," Ok "),b.Pb(),b.Rb(23,"button",8),b.dc("click",(function(e){return t.modal.dismiss("cancel click")})),b.Ic(24," Cancel "),b.Pb(),b.Pb(),b.Nb()),2&e&&(b.xb(11),b.nc("hidden",!t.username),b.xb(2),b.Jc(t.username||""),b.xb(1),b.nc("hidden",!t.username),b.xb(7),b.nc("disabled",t.btnDisabled))},directives:[v.a],styles:[".modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:red}"]}),B),X=((z=function(){function e(t){_classCallCheck(this,e),this.modalService=t,this.isError=new b.m}return _createClass(e,[{key:"ngOnInit",value:function(){this.loading=!1,this.btnText="Delete User!"}},{key:"confirmDeletion",value:function(){var e=this,t=this.modalService.open(V,{centered:!0});t.componentInstance.loading.subscribe((function(t){e.loading=t})),t.componentInstance.isErrorDeleting.subscribe((function(t){e.isError.emit(t)})),t.componentInstance.firedOff.subscribe((function(t){e.firedOff=t})),t.componentInstance.username=JSON.parse(c.a.getCookie("user")).username}}]),e}()).\u0275fac=function(e){return new(e||z)(b.Lb(J.f))},z.\u0275cmp=b.Fb({type:z,selectors:[["account-delete-user-btn"]],outputs:{isError:"isError"},decls:4,vars:3,consts:[[3,"loading"],["id","delete-user-btn","type","button","appBtn","","btnType","danger",3,"disabled","click"]],template:function(e,t){1&e&&(b.Ob(0),b.Mb(1,"spinners-gif-spinner",0),b.Rb(2,"button",1),b.dc("click",(function(e){return t.confirmDeletion()})),b.Ic(3),b.Pb(),b.Nb()),2&e&&(b.xb(1),b.nc("loading",t.loading),b.xb(1),b.nc("disabled",t.firedOff),b.xb(1),b.Kc(" ",t.btnText," "))},directives:[h.a,v.a],styles:["#delete-user-btn[_ngcontent-%COMP%]{cursor:pointer!important;display:inline-block!important}"]}),z);function H(e,t){1&e&&(b.Ob(0),b.Rb(1,"h4",5),b.Ic(2,"Account"),b.Pb(),b.Rb(3,"div",6),b.Ic(4," There was an error while trying to load your user information. Please try again later. "),b.Pb(),b.Nb())}function $(e,t){if(1&e){var n=b.Sb();b.Rb(0,"div",34),b.Mb(1,"fa-icon",35),b.Ic(2,"\xa0If you do not enter a name, your name ("),b.Rb(3,"b"),b.Ic(4,"not your user"),b.Pb(),b.Ic(5,") will be deleted from the database. "),b.Rb(6,"button",36),b.dc("click",(function(e){return b.yc(n),b.gc(4).storeAlertState("notice")})),b.Rb(7,"span",37),b.Ic(8,"\xd7"),b.Pb(),b.Pb(),b.Pb()}if(2&e){var r=b.gc(4);b.xb(1),b.nc("icon",r.faInfoCircle)}}function Q(e,t){if(1&e&&(b.Ob(0),b.Rb(1,"div",38),b.Rb(2,"div",39),b.Ic(3),b.Pb(),b.Rb(4,"div",39),b.Ic(5),b.Pb(),b.Pb(),b.Nb()),2&e){b.gc();var n=b.wc(16),r=b.gc(3);b.xb(1),b.nc("hidden",!(n.touched&&n.invalid)),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.minlength)),b.xb(1),b.Lc(" Name is too short (min: ",r.lengths.name[0],", current: ",r.user.name.length,"). "),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.maxlength)),b.xb(1),b.Lc(" Name is too long (max: ",r.lengths.name[1],", current: ",r.user.name.length,"). ")}}function K(e,t){if(1&e&&(b.Ob(0),b.Rb(1,"div",38),b.Rb(2,"div",39),b.Ic(3),b.Pb(),b.Rb(4,"div",39),b.Ic(5),b.Pb(),b.Rb(6,"div",39),b.Ic(7," Username is required. "),b.Pb(),b.Pb(),b.Nb()),2&e){b.gc();var n=b.wc(24),r=b.gc(3);b.xb(1),b.nc("hidden",!(n.touched&&n.invalid)),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.minlength)),b.xb(1),b.Lc(" Username is too short (min: ",r.lengths.username[0],", current: ",r.user.username.length,"). "),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.maxlength)),b.xb(1),b.Lc(" Username is too long (max: ",r.lengths.username[1],", current: ",r.user.username.length,"). "),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.required))}}function Z(e,t){if(1&e&&(b.Ob(0),b.Rb(1,"div",38),b.Rb(2,"div",39),b.Ic(3),b.Pb(),b.Rb(4,"div",39),b.Ic(5),b.Pb(),b.Rb(6,"div",39),b.Ic(7," Password is required. "),b.Pb(),b.Pb(),b.Nb()),2&e){b.gc();var n=b.wc(32),r=b.gc(3);b.xb(1),b.nc("hidden",!(n.touched&&n.invalid)),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.minlength)),b.xb(1),b.Lc(" Password is too short (min: ",r.lengths.password[0],", current: ",r.user.password.length,"). "),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.maxlength)),b.xb(1),b.Lc(" Password is too long (max: ",r.lengths.password[1],", current: ",r.user.password.length,"). "),b.xb(1),b.nc("hidden",!(null!=n.errors&&n.errors.required))}}function W(e,t){1&e&&(b.Ob(0),b.Ic(1," The username you chose already belongs to another user. "),b.Nb())}function Y(e,t){1&e&&(b.Ic(0," There was an error while trying to update your account."),b.Mb(1,"br"),b.Ic(2,"Please try again later. "))}function ee(e,t){if(1&e&&(b.Rb(0,"div",40),b.Gc(1,W,2,0,"ng-container",3),b.Gc(2,Y,3,0,"ng-template",null,41,b.Hc),b.Pb()),2&e){var n=b.wc(3),r=b.gc(4);b.xb(1),b.nc("ngIf",r.userExists)("ngIfElse",n)}}function te(e,t){if(1&e){var n=b.Sb();b.Rb(0,"div",42),b.Mb(1,"fa-icon",35),b.Ic(2," Updating your user data will log you out. "),b.Rb(3,"button",43),b.dc("click",(function(e){return b.yc(n),b.gc(4).storeAlertState("warning")})),b.Ic(4," \xd7 "),b.Pb(),b.Pb()}if(2&e){var r=b.gc(4);b.xb(1),b.nc("icon",r.faExclamationTriangle)}}function ne(e,t){1&e&&(b.Rb(0,"div",44),b.Ic(1," Oops, looks like there was an error while trying to delete your user."),b.Mb(2,"br"),b.Ic(3,"Please try again later. "),b.Pb())}function re(e,t){if(1&e){var n=b.Sb();b.Rb(0,"form",8,9),b.dc("ngSubmit",(function(e){return b.yc(n),b.gc(3).save()})),b.Rb(2,"fieldset"),b.Rb(3,"legend",10),b.Ic(4,"Account"),b.Pb(),b.Gc(5,$,9,1,"div",11),b.Rb(6,"div",12),b.Rb(7,"p",13),b.Rb(8,"span",14),b.Ic(9,"*"),b.Pb(),b.Ic(10," = required "),b.Pb(),b.Rb(11,"div",15),b.Ob(12),b.Rb(13,"label",16),b.Ic(14,"Name"),b.Pb(),b.Rb(15,"input",17,18),b.dc("ngModelChange",(function(e){return b.yc(n),b.gc(3).user.name=e})),b.Pb(),b.Gc(17,Q,6,7,"ng-container",19),b.Nb(),b.Ob(18),b.Rb(19,"label",20),b.Ic(20,"Username\xa0"),b.Rb(21,"span",21),b.Ic(22,"*"),b.Pb(),b.Pb(),b.Rb(23,"input",22,23),b.dc("ngModelChange",(function(e){return b.yc(n),b.gc(3).user.username=e})),b.Pb(),b.Gc(25,K,8,8,"ng-container",19),b.Nb(),b.Ob(26),b.Rb(27,"label",24),b.Ic(28,"Password\xa0"),b.Rb(29,"span",21),b.Ic(30,"*"),b.Pb(),b.Pb(),b.Rb(31,"input",25,26),b.dc("ngModelChange",(function(e){return b.yc(n),b.gc(3).user.password=e}))("focus",(function(e){return b.yc(n),b.gc(3).pwFocused=!0}))("blur",(function(e){return b.yc(n),b.gc(3).pwFocused=!1})),b.Pb(),b.Gc(33,Z,8,8,"ng-container",19),b.Nb(),b.Pb(),b.Rb(34,"button",27),b.dc("click",(function(e){return b.yc(n),b.gc(3).sanitizeData()})),b.Ic(35," Save "),b.Pb(),b.Pb(),b.Pb(),b.Gc(36,ee,4,2,"div",28),b.Rb(37,"div",29),b.Gc(38,te,5,1,"div",30),b.Pb(),b.Gc(39,ne,4,0,"div",31),b.Rb(40,"div",32),b.Mb(41,"account-update-roms"),b.Rb(42,"account-delete-user-btn",33),b.dc("isError",(function(e){return b.yc(n),b.gc(3).deletionError(e)})),b.Pb(),b.Pb(),b.Pb()}if(2&e){var r=b.wc(1),i=b.gc(3);b.xb(5),b.nc("ngIf",!i.noticeClosed),b.xb(10),b.qc("placeholder","min: ",i.lengths.name[0],", max: ",i.lengths.name[1]," (optional)"),b.nc("ngModel",i.user.name),b.xb(2),b.nc("ngIf",null!==i.user.name),b.xb(6),b.qc("placeholder","min: ",i.lengths.username[0],", max: ",i.lengths.username[1],""),b.nc("ngModel",i.user.username),b.xb(2),b.nc("ngIf",i.user.hasOwnProperty("username")),b.xb(6),b.qc("placeholder","min: ",i.lengths.password[0],", max: ",i.lengths.password[1],""),b.nc("type",i.changePwInputType())("ngModel",i.user.password),b.xb(2),b.nc("ngIf",i.user.hasOwnProperty("password")),b.xb(1),b.nc("disabled",i.firedOff||!r.valid||!(i.user.username||i.user.username.length>0||i.user.password||i.user.password.length>0||i.user.name||i.user.name.length>0)),b.xb(2),b.nc("ngIf",i.updateFail),b.xb(2),b.nc("ngIf",!i.warningClosed),b.xb(1),b.nc("ngIf",i.isErrorDeleting)}}function ie(e,t){if(1&e&&b.Gc(0,re,43,18,"form",7),2&e){var n=b.gc(2);b.nc("ngIf",!n.errLoadingUsr)}}function se(e,t){if(1&e&&(b.Rb(0,"div",2),b.Gc(1,H,5,0,"ng-container",3),b.Gc(2,ie,1,1,"ng-template",null,4,b.Hc),b.Pb()),2&e){var n=b.wc(3),r=b.gc();b.xb(1),b.nc("ngIf",r.errLoadingUsr)("ngIfElse",n)}}var ae,oe,ce=((ae=function(){function e(t,n){_classCallCheck(this,e),this.userService=t,this.router=n,String.prototype.sanitizeXSS=a.a,String.prototype.removeStringChars=o.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.lengths=r.b,this.userExists=!1,this.updateFail=!1,this.pwFocused=!1,this.ready=!1,this.firedOff=!1,this.errLoadingUsr=!1,this.isErrorDeleting=!1,this.faExclamationTriangle=s.e,this.faInfoCircle=s.j,c.a.getCookie("user")?(this.userId=JSON.parse(c.a.getCookie("user")).id,this.retrieveUserData(this.userId)):this.errLoadingUsr=!0,u.a.getState("noticeClosed")||u.a.setState("noticeClosed","false"),d.a.getState("warningClosed")||d.a.setState("warningClosed","false"),this.noticeClosed=u.a.getState("noticeClosed"),this.warningClosed=d.a.getState("warningClosed")}},{key:"ngOnDestroy",value:function(){this.userSub.unsubscribe()}},{key:"retrieveUserData",value:function(e){var t=this;this.userObs$=this.userService.getUser(e),this.userSub=this.userObs$.subscribe((function(e){e.name&&""!==e.name||(e.name=""),e.password="",t.user=e,t.ready=!0}),(function(e){t.errLoadingUsr=!0,t.ready=!0,l.a.error(e)}))}},{key:"save",value:function(){this.firedOff=!0,this.ready=!1,this.user.name&&""!==this.user.name||(this.user.name=null),this.updateUser(this.userId,this.user,["error","user_exists"])}},{key:"sanitizeData",value:function(){this.user.name&&(this.user.name=this.user.name.sanitizeXSS({replaceSpecialChars:!0}).removeStringChars()),this.user.username&&(this.user.username=this.user.username.sanitizeXSS({replaceSpecialChars:!1}).removeStringChars()),this.user.password&&(this.user.password=this.user.password.sanitizeXSS({replaceSpecialChars:!1}).removeStringChars())}},{key:"changePwInputType",value:function(){return this.pwFocused?"text":"password"}},{key:"deletionError",value:function(e){this.isErrorDeleting=e}},{key:"storeAlertState",value:function(e){switch(e){case"notice":u.a.setState("noticeClosed","true");break;case"warning":d.a.setState("warningClosed","true");break;default:l.a.error("Unknown alert name.")}}},{key:"updateUser",value:function(e,t,n){var r=this;this.userService.updateUser(e,t).subscribe((function(){r.ready=!0,r.userExists=!1,i.a.logout(),r.router.navigate(["/","home"])}),(function(e){r.ready=!0,r.updateFail=!0,r.firedOff=!1,!0===e[n[0]][n[1]]&&(r.userExists=!0),l.a.error(e)}))}}]),e}()).\u0275fac=function(e){return new(e||ae)(b.Lb(r.a),b.Lb(f.d))},ae.\u0275cmp=b.Fb({type:ae,selectors:[["account"]],decls:3,vars:2,consts:[[3,"loading"],["class","container text-center mb-2","id","form-container",4,"ngIf"],["id","form-container",1,"container","text-center","mb-2"],[4,"ngIf","ngIfElse"],["account",""],[1,"mt-1"],["appAlert","","alertType","danger",1,"mt-3"],["name","accountForm","autocomplete","on",3,"ngSubmit",4,"ngIf"],["name","accountForm","autocomplete","on",3,"ngSubmit"],["accountForm","ngForm"],[1,"pt-2","pb-2","text-center"],["class","alert-dismissible fade show text-left","appAlert","","alertType","info","role","alert",4,"ngIf"],["id","border-container",1,"border","rounded"],[1,"mb-0"],[1,"text-danger","font-weight-bold"],[1,"form-group"],["for","name",1,"font-weight-bold"],["type","text","id","name","name","name","autocomplete","name","minlength","1","maxlength","100",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["for","username",1,"font-weight-bold","pt-1"],[1,"text-danger"],["type","text","id","username","name","username","autocomplete","username","minlength","3","maxlength","22","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["username","ngModel"],["for","password",1,"font-weight-bold"],["id","password","name","password","autocomplete","new-password","minlength","6","maxlength","256","required","",1,"form-control",3,"type","placeholder","ngModel","ngModelChange","focus","blur"],["password","ngModel"],["type","submit","appBtn","","btnType","success",3,"disabled","click"],["class","mt-2","appAlert","","alertType","danger",4,"ngIf"],[1,"mt-3","mb-3"],["class","font-weight-bold alert-dismissible show fade","appAlert","","alertType","warning",4,"ngIf"],["class","mt-1","appAlert","","alertType","danger",4,"ngIf"],[1,"d-flex","flex-column"],[3,"isError"],["appAlert","","alertType","info","role","alert",1,"alert-dismissible","fade","show","text-left"],[1,"mr-1",3,"icon"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["appAlert","","alertType","warning",3,"hidden"],[3,"hidden"],["appAlert","","alertType","danger",1,"mt-2"],["normalErrMsg",""],["appAlert","","alertType","warning",1,"font-weight-bold","alert-dismissible","show","fade"],["type","button","data-dismiss","alert",1,"close","p-2","mr-2",3,"click"],["appAlert","","alertType","danger",1,"mt-1"]],template:function(e,t){1&e&&(b.Ob(0),b.Mb(1,"spinners-gif-spinner",0),b.Gc(2,se,4,2,"div",1),b.Nb()),2&e&&(b.xb(1),b.nc("loading",!t.ready&&!t.errLoadingUsr),b.xb(1),b.nc("ngIf",t.ready))},directives:[h.a,p.o,m.a,g.u,g.m,g.n,g.a,g.i,g.h,g.l,g.o,g.r,v.a,q,X,A.a],styles:["#form-container[_ngcontent-%COMP%]{margin:0 auto;padding-top:1rem;width:32vw}@media only screen and (min-width:100px)and (max-width:992px){#form-container[_ngcontent-%COMP%]{width:45vw}}@media only screen and (min-width:991px)and (max-width:762px){#form-container[_ngcontent-%COMP%]{width:55vw}}@media only screen and (min-width:761px)and (max-width:703px){#form-container[_ngcontent-%COMP%]{width:63vw}}@media only screen and (min-width:0)and (max-width:702px){#form-container[_ngcontent-%COMP%]{width:70vw}}#border-container[_ngcontent-%COMP%]{background-color:#fff;padding:14px}label[_ngcontent-%COMP%]{padding-top:1rem}"]}),ae),le=n("UTcu"),ue=n("Dat7"),de=[{path:"",component:ce,canActivate:[le.a,ue.a]}],be=((oe=function e(){_classCallCheck(this,e)}).\u0275mod=b.Jb({type:oe}),oe.\u0275inj=b.Ib({factory:function(e){return new(e||oe)},imports:[[f.h.forChild(de)],f.h]}),oe),fe=n("WjtB"),he=n("FUS3");n.d(t,"AccountModule",(function(){return me}));var pe,me=((pe=function e(){_classCallCheck(this,e)}).\u0275mod=b.Jb({type:pe}),pe.\u0275inj=b.Ib({factory:function(e){return new(e||pe)},providers:[r.a,D.a],imports:[[p.c,J.g,be,fe.a,g.g,A.b,he.a]]}),pe)}}]);