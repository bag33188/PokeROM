function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{qYmF:function(e,n,r){"use strict";r.r(n);var t=r("ofXK"),a=r("3Pt+"),o=r("lGQG"),i=r("Rv5h"),s=r("vuBd"),d=r("Mb37"),c=r("qfBg"),l=r("fXoL"),u=r("tyNb"),m=r("NvMS"),b=r("FpAq"),g=r("siFw");function h(e,n){if(1&e&&(l.Rb(0,"div",16),l.Ic(1),l.Pb()),2&e){var r=l.gc();l.xb(1),l.Kc(" ",r.loginFail," ")}}var p,f,w=function(){return["/","register"]},v=[{path:"",component:(p=function(){function e(n,r,t){_classCallCheck(this,e),this.authService=n,this.router=r,this.route=t,this.loginForm=new a.e({username:new a.c("",[a.s.required,a.s.minLength(3),a.s.maxLength(22)]),password:new a.c("",[a.s.required,a.s.minLength(6),a.s.maxLength(256)])}),this.lengths=c.b,String.prototype.sanitizeXSS=i.a,String.prototype.removeStringChars=s.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.firedOff=!1,this.loading=!1,setTimeout(o.a.logout,100)}},{key:"login",value:function(){var e=this;this.firedOff=!0,this.loading=!0,this.authService.authenticateUser({username:this.Username.value,password:this.Password.value}).subscribe((function(n){if(n.success){o.a.storeData(n.token,n.user),e.loading=!1;var r=e.route.snapshot.queryParamMap.get("returnUrl");e.router.navigate([r||"/roms"]),e.loginFail=""}else e.loading=!1,e.loginFail="Incorrect Login"}),(function(n){throw e.loading=!1,e.firedOff=!1,e.loginFail=404===n.status?"User does not exist":403===n.status?"Wrong password":"Oops, there was a problem while trying to log you in. Please try again later.",d.a.error(n)}))}},{key:"sanitizeData",value:function(){this.Username.setValue(this.Username.value.sanitizeXSS({replaceSpecialChars:!0}).removeStringChars()),this.Password.setValue(this.Password.value.sanitizeXSS({replaceSpecialChars:!1}))}},{key:"Username",get:function(){return this.loginForm.get("username")}},{key:"Password",get:function(){return this.loginForm.get("password")}}]),e}(),p.\u0275fac=function(e){return new(e||p)(l.Lb(o.a),l.Lb(u.d),l.Lb(u.a))},p.\u0275cmp=l.Fb({type:p,selectors:[["login"]],decls:39,vars:22,consts:[[3,"loading"],["id","form-container",1,"container","text-center"],["name","loginForm","autocomplete","on",3,"formGroup","ngSubmit"],[1,"pt-2","pb-2","text-center"],["id","border-container",1,"border","rounded"],[1,"form-group"],["for","username",1,"font-weight-bold"],["type","text","id","username","name","username","formControlName","username","autocomplete","username",1,"form-control"],["appAlert","","alertType","warning",3,"hidden"],[3,"hidden"],["for","password",1,"font-weight-bold"],["type","password","id","password","name","password","formControlName","password","autocomplete","current-password",1,"form-control"],["type","submit","appBtn","","btnType","success",3,"disabled","click"],["appAlert","","alertType","info",1,"mt-2","mb-2"],[3,"routerLink"],["class","mt-1","appAlert","","alertType","danger",4,"ngIf"],["appAlert","","alertType","danger",1,"mt-1"]],template:function(e,n){1&e&&(l.Ob(0),l.Mb(1,"spinners-gif-spinner",0),l.Rb(2,"div",1),l.Rb(3,"form",2),l.dc("ngSubmit",(function(e){return n.login()})),l.Rb(4,"fieldset"),l.Rb(5,"legend",3),l.Ic(6,"Login"),l.Pb(),l.Rb(7,"div",4),l.Rb(8,"div",5),l.Ob(9),l.Rb(10,"label",6),l.Ic(11,"Username"),l.Pb(),l.Mb(12,"input",7),l.Rb(13,"div",8),l.Rb(14,"div",9),l.Ic(15," Username is required. "),l.Pb(),l.Rb(16,"div",9),l.Ic(17),l.Pb(),l.Rb(18,"div",9),l.Ic(19),l.Pb(),l.Pb(),l.Nb(),l.Ob(20),l.Rb(21,"label",10),l.Ic(22,"Password"),l.Pb(),l.Mb(23,"input",11),l.Rb(24,"div",8),l.Rb(25,"div",9),l.Ic(26," Password is required. "),l.Pb(),l.Rb(27,"div",9),l.Ic(28),l.Pb(),l.Rb(29,"div",9),l.Ic(30),l.Pb(),l.Pb(),l.Nb(),l.Pb(),l.Rb(31,"button",12),l.dc("click",(function(e){return n.sanitizeData()})),l.Ic(32," Login "),l.Pb(),l.Pb(),l.Pb(),l.Rb(33,"div",13),l.Ic(34," Don't have an account? Register "),l.Rb(35,"a",14),l.Ic(36,"here"),l.Pb(),l.Ic(37,"! "),l.Pb(),l.Gc(38,h,2,1,"div",15),l.Pb(),l.Pb(),l.Nb()),2&e&&(l.xb(1),l.nc("loading",n.loading),l.xb(2),l.nc("formGroup",n.loginForm),l.xb(10),l.nc("hidden",!(n.Username.touched&&n.Username.invalid)),l.xb(1),l.nc("hidden",!(null!=n.Username.errors&&n.Username.errors.required)),l.xb(2),l.nc("hidden",!(null!=n.Username.errors&&n.Username.errors.minlength)),l.xb(1),l.Lc(" Username is too short (min: ",n.lengths.username[0],", current: ",n.Username.value.length,"). "),l.xb(1),l.nc("hidden",!(null!=n.Username.errors&&n.Username.errors.maxlength)),l.xb(1),l.Lc(" Username is too long (max: ",n.lengths.username[1],", current: ",n.Username.value.length,"). "),l.xb(5),l.nc("hidden",!(n.Password.touched&&n.Password.invalid)),l.xb(1),l.nc("hidden",!(null!=n.Password.errors&&n.Password.errors.required)),l.xb(2),l.nc("hidden",!(null!=n.Password.errors&&n.Password.errors.minlength)),l.xb(1),l.Lc(" Password is too short (min: ",n.lengths.password[0],", current: ",n.Password.value.length,"). "),l.xb(1),l.nc("hidden",!(null!=n.Password.errors&&n.Password.errors.maxlength)),l.xb(1),l.Lc(" Password is too long (max: ",n.lengths.password[1],", current: ",n.Password.value.length,"). "),l.xb(1),l.nc("disabled",!n.loginForm.valid||n.loading||n.firedOff),l.xb(4),l.nc("routerLink",l.rc(21,w)),l.xb(3),l.nc("ngIf",n.loginFail))},directives:[m.a,a.u,a.m,a.f,a.a,a.l,a.d,b.a,g.a,u.g,t.o],styles:["#form-container[_ngcontent-%COMP%]{margin:0 auto;padding-top:1rem;width:32vw}@media only screen and (min-width:100px)and (max-width:992px){#form-container[_ngcontent-%COMP%]{width:45vw}}@media only screen and (min-width:991px)and (max-width:762px){#form-container[_ngcontent-%COMP%]{width:55vw}}@media only screen and (min-width:761px)and (max-width:703px){#form-container[_ngcontent-%COMP%]{width:63vw}}@media only screen and (min-width:0)and (max-width:702px){#form-container[_ngcontent-%COMP%]{width:70vw}}#border-container[_ngcontent-%COMP%]{background-color:#fff;padding:14px}label[_ngcontent-%COMP%]{padding-top:1rem}"]}),p),canActivate:[r("Dat7").a]}],P=((f=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:f}),f.\u0275inj=l.Ib({factory:function(e){return new(e||f)},imports:[[u.h.forChild(v)],u.h]}),f),x=r("FUS3"),y=r("WjtB");r.d(n,"LoginModule",(function(){return R}));var C,R=((C=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:C}),C.\u0275inj=l.Ib({factory:function(e){return new(e||C)},providers:[c.a,o.a],imports:[[t.c,P,x.a,y.a,a.q]]}),C)}}]);