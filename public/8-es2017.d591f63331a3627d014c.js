(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FpAq:function(e,r,n){"use strict";n.d(r,"a",function(){return a});var t=n("Mb37"),s=n("fXoL");let a=(()=>{class e{constructor(e){this.el=e}ngOnInit(){this.preClasses=["alert",this.addShadow?"shadow":null],this.alertType?this.setType():t.a.error("No alert type specified."),null!=this.addShadow&&"boolean"!=typeof this.addShadow&&t.a.error("addShadow must be a boolean.")}getType(){if("string"!=typeof this.alertType)return t.a.error("Type must be a string."),new Array;switch(this.alertType){case"primary":return[...this.preClasses,"alert-primary"];case"secondary":return[...this.preClasses,"alert-secondary"];case"warning":return[...this.preClasses,"alert-warning"];case"success":return[...this.preClasses,"alert-success"];case"danger":return[...this.preClasses,"alert-danger"];case"info":return[...this.preClasses,"alert-info"];case"light":return[...this.preClasses,"alert-light"];case"dark":return[...this.preClasses,"alert-dark"];default:return t.a.error("Invalid alert type."),new Array}}setType(){const e=this.getType(),r=this.el.nativeElement.classList;e.forEach(e=>{Array.from(r).includes(e)&&r.remove(e),r.add(e)}),-1!==Array.prototype.slice.call(r).indexOf("null")&&r.remove("null")}}return e.\u0275fac=function(r){return new(r||e)(s.Mb(s.m))},e.\u0275dir=s.Hb({type:e,selectors:[["","appAlert",""]],inputs:{alertType:"alertType",addShadow:["shadow","addShadow"]}}),e})()},NvMS:function(e,r,n){"use strict";n.d(r,"a",function(){return c});var t=n("Ei5h"),s=n("DvS/"),a=n("Mb37"),i=n("fXoL"),o=n("3+9a");const d=["spinnerImg"];let c=(()=>{class e{constructor(){}ngOnInit(){this.fallbackUrl=s.a.SPINNER,this.images=t.a}ngAfterContentInit(){this.checkInput()}checkInput(){null==this.loading&&a.a.error("Loading property is required.")}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=i.Gb({type:e,selectors:[["spinners-gif-spinner"]],viewQuery:function(e,r){if(1&e&&i.Kc(d,!0),2&e){let e;i.uc(e=i.cc())&&(r.spinnerImage=e.first)}},inputs:{loading:"loading"},decls:4,vars:7,consts:[[1,"spinner-container",3,"hidden"],["alt","Loading...",1,"spinner",3,"src"],["spinnerImg",""]],template:function(e,r){1&e&&(i.Rb(0,"div",0),i.Nb(1,"img",1,2),i.fc(3,"defaultImage"),i.Qb()),2&e&&(i.mc("hidden",!r.loading),i.zb(1),i.mc("src",i.jc(3,2,r.images.SPINNER,r.fallbackUrl,r.spinnerImage,!0),i.zc))},pipes:[o.a],styles:[".spinner[_ngcontent-%COMP%]{height:6rem;width:6rem}.spinner-container[_ngcontent-%COMP%]{height:calc(100vh - (56px + 2rem));margin-right:-48px;margin-top:-48px;position:fixed;right:50%;top:50%;z-index:18}@media only screen and (max-width:500px){.spinner[_ngcontent-%COMP%]{height:4rem!important;width:4rem!important}.spinner-container[_ngcontent-%COMP%]{margin-right:-32px!important;margin-top:-32px!important}}@-webkit-keyframes rotate{to{transform:rotate(1turn)}}@keyframes rotate{to{transform:rotate(1turn)}}"]}),e})()},WjtB:function(e,r,n){"use strict";n.d(r,"a",function(){return i});var t=n("ofXK"),s=n("iTUp"),a=n("fXoL");let i=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(r){return new(r||e)},imports:[[t.c,s.a]]}),e})()},qYmF:function(e,r,n){"use strict";n.r(r),n.d(r,"LoginModule",function(){return x});var t=n("ofXK"),s=n("tyNb"),a=n("Dat7"),i=n("3Pt+"),o=n("lGQG"),d=n("Rv5h"),c=n("vuBd"),l=n("Mb37"),m=n("qfBg"),u=n("fXoL"),h=n("NvMS"),p=n("FpAq"),g=n("siFw");function b(e,r){if(1&e&&(u.Rb(0,"div",16),u.Gc(1),u.Qb()),2&e){const e=u.ec();u.mc("shadow",!0),u.zb(1),u.Ic(" ",e.loginFail," ")}}const f=function(){return["/","register"]},w=[{path:"",component:(()=>{class e{constructor(e,r,n){this.authService=e,this.router=r,this.route=n,String.prototype.sanitizeXSS=d.a,String.prototype.removeStringChars=c.a}get Username(){return this.loginForm.get("username")}get Password(){return this.loginForm.get("password")}ngOnInit(){this.lengths=m.b,this.loginForm=new i.e({username:new i.c("",[i.s.required,i.s.minLength(this.lengths.username[0]),i.s.maxLength(this.lengths.username[1])]),password:new i.c("",[i.s.required,i.s.minLength(this.lengths.password[0]),i.s.maxLength(this.lengths.password[1])])}),this.firedOff=!1,this.loading=!1,setTimeout(o.a.logout,100)}login(){this.firedOff=!0,this.loading=!0,this.authService.authenticateUser({username:this.Username.value,password:this.Password.value}).subscribe(e=>{if(e.success){o.a.storeData(e.token,e.user),this.loading=!1;const r=this.route.snapshot.queryParamMap.get("returnUrl");this.router.navigate([r||"/roms"]),this.loginFail=""}else this.loading=!1,this.loginFail="Incorrect Login"},e=>{this.loading=!1,this.firedOff=!1,this.loginFail=404===e.status?"User does not exist":403===e.status?"Wrong password":"Oops, there was a problem while trying to log you in. Please try again later.",l.a.error(e)})}sanitizeData(){this.Username.setValue(this.Username.value.sanitizeXSS({replaceSpecialChars:!0}).removeStringChars()),this.Password.setValue(this.Password.value.sanitizeXSS({replaceSpecialChars:!1}))}}return e.\u0275fac=function(r){return new(r||e)(u.Mb(o.a),u.Mb(s.d),u.Mb(s.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["login"]],decls:39,vars:23,consts:[[3,"loading"],["id","form-container",1,"container","text-center"],["name","loginForm","autocomplete","on",3,"formGroup","ngSubmit"],[1,"pt-2","pb-2","text-center"],["id","border-container",1,"border","rounded","shadow"],[1,"form-group"],["for","username",1,"font-weight-bold"],["type","text","id","username","name","username","formControlName","username","autocomplete","username",1,"form-control"],["appAlert","","alertType","warning",3,"hidden"],[3,"hidden"],["for","password",1,"font-weight-bold"],["type","password","id","password","name","password","formControlName","password","autocomplete","current-password",1,"form-control"],["type","submit","appBtn","","btnType","success",3,"disabled","click"],["appAlert","","alertType","info",1,"mt-2","mb-2",3,"shadow"],[3,"routerLink"],["class","mt-1","appAlert","","alertType","danger",3,"shadow",4,"ngIf"],["appAlert","","alertType","danger",1,"mt-1",3,"shadow"]],template:function(e,r){1&e&&(u.Pb(0),u.Nb(1,"spinners-gif-spinner",0),u.Rb(2,"div",1),u.Rb(3,"form",2),u.bc("ngSubmit",function(){return r.login()}),u.Rb(4,"fieldset"),u.Rb(5,"legend",3),u.Gc(6,"Login"),u.Qb(),u.Rb(7,"div",4),u.Rb(8,"div",5),u.Pb(9),u.Rb(10,"label",6),u.Gc(11,"Username"),u.Qb(),u.Nb(12,"input",7),u.Rb(13,"div",8),u.Rb(14,"div",9),u.Gc(15," Username is required. "),u.Qb(),u.Rb(16,"div",9),u.Gc(17),u.Qb(),u.Rb(18,"div",9),u.Gc(19),u.Qb(),u.Qb(),u.Ob(),u.Pb(20),u.Rb(21,"label",10),u.Gc(22,"Password"),u.Qb(),u.Nb(23,"input",11),u.Rb(24,"div",8),u.Rb(25,"div",9),u.Gc(26," Password is required. "),u.Qb(),u.Rb(27,"div",9),u.Gc(28),u.Qb(),u.Rb(29,"div",9),u.Gc(30),u.Qb(),u.Qb(),u.Ob(),u.Qb(),u.Rb(31,"button",12),u.bc("click",function(){return r.sanitizeData()}),u.Gc(32," Login "),u.Qb(),u.Qb(),u.Qb(),u.Rb(33,"div",13),u.Gc(34," Don't have an account? Register "),u.Rb(35,"a",14),u.Gc(36,"here"),u.Qb(),u.Gc(37,"! "),u.Qb(),u.Ec(38,b,2,2,"div",15),u.Qb(),u.Qb(),u.Ob()),2&e&&(u.zb(1),u.mc("loading",r.loading),u.zb(2),u.mc("formGroup",r.loginForm),u.zb(10),u.mc("hidden",!(r.Username.touched&&r.Username.invalid)),u.zb(1),u.mc("hidden",!(null!=r.Username.errors&&r.Username.errors.required)),u.zb(2),u.mc("hidden",!(null!=r.Username.errors&&r.Username.errors.minlength)),u.zb(1),u.Jc(" Username is too short (min: ",r.lengths.username[0],", current: ",r.Username.value.length,"). "),u.zb(1),u.mc("hidden",!(null!=r.Username.errors&&r.Username.errors.maxlength)),u.zb(1),u.Jc(" Username is too long (max: ",r.lengths.username[1],", current: ",r.Username.value.length,"). "),u.zb(5),u.mc("hidden",!(r.Password.touched&&r.Password.invalid)),u.zb(1),u.mc("hidden",!(null!=r.Password.errors&&r.Password.errors.required)),u.zb(2),u.mc("hidden",!(null!=r.Password.errors&&r.Password.errors.minlength)),u.zb(1),u.Jc(" Password is too short (min: ",r.lengths.password[0],", current: ",r.Password.value.length,"). "),u.zb(1),u.mc("hidden",!(null!=r.Password.errors&&r.Password.errors.maxlength)),u.zb(1),u.Jc(" Password is too long (max: ",r.lengths.password[1],", current: ",r.Password.value.length,"). "),u.zb(1),u.mc("disabled",!r.loginForm.valid||r.loading||r.firedOff),u.zb(2),u.mc("shadow",!0),u.zb(2),u.mc("routerLink",u.qc(22,f)),u.zb(3),u.mc("ngIf",r.loginFail))},directives:[h.a,i.u,i.m,i.f,i.a,i.l,i.d,p.a,g.a,s.g,t.o],styles:["#form-container[_ngcontent-%COMP%]{margin:0 auto;padding-top:1rem;width:32vw}@media only screen and (min-width:100px) and (max-width:992px){#form-container[_ngcontent-%COMP%]{width:45vw}}@media only screen and (min-width:991px) and (max-width:762px){#form-container[_ngcontent-%COMP%]{width:55vw}}@media only screen and (min-width:761px) and (max-width:703px){#form-container[_ngcontent-%COMP%]{width:63vw}}@media only screen and (min-width:0) and (max-width:702px){#form-container[_ngcontent-%COMP%]{width:70vw}}#border-container[_ngcontent-%COMP%]{background-color:#fff;padding:14px}label[_ngcontent-%COMP%]{padding-top:1rem}"]}),e})(),canActivate:[a.a]}];let v=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(r){return new(r||e)},imports:[[s.h.forChild(w)],s.h]}),e})();var y=n("FUS3"),P=n("WjtB");let x=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(r){return new(r||e)},providers:[m.a,o.a],imports:[[t.c,v,y.a,P.a,i.q]]}),e})()}}]);