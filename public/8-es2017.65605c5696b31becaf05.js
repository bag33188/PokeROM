(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{NvMS:function(e,r,n){"use strict";n.d(r,"a",(function(){return d}));var t=n("Ei5h"),s=n("DvS/"),i=n("Mb37"),o=n("8Y7J"),a=n("3+9a");const c=["spinnerImg"];let d=(()=>{class e{constructor(){}ngOnInit(){this.fallbackUrl=s.a.SPINNER,this.images=t.a}ngAfterContentInit(){this.checkInput()}checkInput(){null==this.loading&&i.a.error("Loading property is required.")}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["spinners-gif-spinner"]],viewQuery:function(e,r){var n;1&e&&o.Oc(c,!0),2&e&&o.xc(n=o.fc())&&(r.spinnerImage=n.first)},inputs:{loading:"loading"},decls:4,vars:7,consts:[[1,"spinner-container",3,"hidden"],["alt","Loading...",1,"spinner",3,"src"],["spinnerImg",""]],template:function(e,r){1&e&&(o.Sb(0,"div",0),o.Nb(1,"img",1,2),o.ic(3,"defaultImage"),o.Qb()),2&e&&(o.pc("hidden",!r.loading),o.yb(1),o.pc("src",o.mc(3,2,r.images.SPINNER,r.fallbackUrl,r.spinnerImage,!0),o.Cc))},pipes:[a.a],styles:[".spinner[_ngcontent-%COMP%]{height:6rem;width:6rem}.spinner-container[_ngcontent-%COMP%]{height:calc(100vh - 56px - 2rem);margin-right:-48px;margin-top:-48px;position:fixed;right:50%;top:50%;z-index:18}@media only screen and (max-width:500px){.spinner[_ngcontent-%COMP%]{height:4rem!important;width:4rem!important}.spinner-container[_ngcontent-%COMP%]{margin-right:-32px!important;margin-top:-32px!important}}@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}"]}),e})()},WjtB:function(e,r,n){"use strict";n.d(r,"a",(function(){return o})),n("NvMS"),n("beNV");var t=n("SVse"),s=n("iTUp"),i=n("8Y7J");let o=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(r){return new(r||e)},imports:[[t.c,s.a]]}),e})()},beNV:function(e,r,n){"use strict";n.d(r,"a",(function(){return o}));var t=n("Mb37"),s=n("8Y7J"),i=n("SVse");let o=(()=>{class e{constructor(){}ngOnInit(){!1===this.checkForErrors()&&(this.setType(),this.setColor(),this.ngClasses={[this.type]:!0,[this.color]:!0,spacing:null!=this.spaced&&!0===this.spaced})}setType(){this.type=this.getType()}setColor(){this.color=this.getColor()}getType(){if("string"==typeof this.spinnerType)switch(this.spinnerType){case"border":return"spinner-border";case"grow":return"spinner-grow";default:t.a.error("Invalid type.")}else t.a.error("Type must be a string.")}getColor(){if("string"==typeof this.spinnerColor)switch(this.spinnerColor){case"primary":return"text-primary";case"secondary":return"text-secondary";case"success":return"text-success";case"danger":return"text-danger";case"warning":return"text-warning";case"info":return"text-info";case"light":return"text-light";case"dark":return"text-dark";default:t.a.error("Invalid color.")}else t.a.error("Color must be a string.")}checkForErrors(){return this.spinnerType?this.spinnerColor?null==this.loading?(t.a.error("Loading property is required."),!0):null!=this.spaced&&"boolean"!=typeof this.spaced?(t.a.error("Spaced property must be a boolean."),!0):!(!this.customSize||"number"==typeof this.customSize||(t.a.error("Custom size property must be a number data-type."),0)):(t.a.error("Color is required."),!0):(t.a.error("Type is required."),!0)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["spinners-bootstrap-spinner"]],inputs:{loading:"loading",spinnerType:["type","spinnerType"],spinnerColor:["color","spinnerColor"],customSize:["size","customSize"],spaced:"spaced"},decls:3,vars:4,consts:[["role","status",3,"ngClass","hidden"],[1,"sr-only"]],template:function(e,r){1&e&&(s.Sb(0,"div",0),s.Sb(1,"span",1),s.Kc(2,"Loading..."),s.Qb(),s.Qb()),2&e&&(s.Hc("height",r.customSize?r.customSize:32,"px")("width",r.customSize?r.customSize:32,"px"),s.pc("ngClass",r.ngClasses)("hidden",!r.loading))},directives:[i.m],styles:[".spacing[_ngcontent-%COMP%]{margin:3rem!important}"]}),e})()},qYmF:function(e,r,n){"use strict";n.r(r);var t=n("SVse"),s=n("s7LF"),i=n("lGQG"),o=n("Rv5h"),a=n("vuBd"),c=n("Mb37"),d=n("qfBg"),l=n("8Y7J"),p=n("iInd"),u=n("NvMS"),m=n("FpAq"),g=n("siFw");function h(e,r){if(1&e&&(l.Sb(0,"div",16),l.Kc(1),l.Qb()),2&e){const e=l.hc();l.yb(1),l.Mc(" ",e.loginFail," ")}}const b=function(){return["/","register"]},f=[{path:"",component:(()=>{class e{constructor(e,r,n){this.authService=e,this.router=r,this.route=n,String.prototype.sanitizeXSS=o.a,String.prototype.removeStringChars=a.a}get Username(){return this.loginForm.get("username")}get Password(){return this.loginForm.get("password")}ngOnInit(){this.lengths=d.b,this.loginForm=new s.e({username:new s.c("",[s.s.required,s.s.minLength(this.lengths.username[0]),s.s.maxLength(this.lengths.username[1])]),password:new s.c("",[s.s.required,s.s.minLength(this.lengths.password[0]),s.s.maxLength(this.lengths.password[1])])}),this.firedOff=!1,this.loading=!1,setTimeout(i.a.logout,100)}login(){this.firedOff=!0,this.loading=!0,this.authService.authenticateUser({username:this.Username.value,password:this.Password.value}).subscribe(e=>{if(e.success){i.a.storeData(e.token,e.user),this.loading=!1;const r=this.route.snapshot.queryParamMap.get("returnUrl");this.router.navigate([r||"/roms"]),this.loginFail=""}else this.loading=!1,this.loginFail="Incorrect Login"},e=>{throw this.loading=!1,this.firedOff=!1,this.loginFail=404===e.status?"User does not exist":403===e.status?"Wrong password":"Oops, there was a problem while trying to log you in. Please try again later.",c.a.error(e)})}sanitizeData(){this.Username.setValue(this.Username.value.sanitizeXSS({replaceSpecialChars:!0}).removeStringChars()),this.Password.setValue(this.Password.value.sanitizeXSS({replaceSpecialChars:!1}))}}return e.\u0275fac=function(r){return new(r||e)(l.Mb(i.a),l.Mb(p.d),l.Mb(p.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["login"]],decls:39,vars:22,consts:[[3,"loading"],["id","form-container",1,"container","text-center"],["name","loginForm","autocomplete","on",3,"formGroup","ngSubmit"],[1,"pt-2","pb-2","text-center"],["id","border-container",1,"border","rounded"],[1,"form-group"],["for","username",1,"font-weight-bold"],["type","text","id","username","name","username","formControlName","username","autocomplete","username",1,"form-control"],["appAlert","","alertType","warning",3,"hidden"],[3,"hidden"],["for","password",1,"font-weight-bold"],["type","password","id","password","name","password","formControlName","password","autocomplete","current-password",1,"form-control"],["type","submit","appBtn","","btnType","success",3,"disabled","click"],["appAlert","","alertType","info",1,"mt-2","mb-2"],[3,"routerLink"],["class","mt-1","appAlert","","alertType","danger",4,"ngIf"],["appAlert","","alertType","danger",1,"mt-1"]],template:function(e,r){1&e&&(l.Pb(0),l.Nb(1,"spinners-gif-spinner",0),l.Sb(2,"div",1),l.Sb(3,"form",2),l.ec("ngSubmit",(function(e){return r.login()})),l.Sb(4,"fieldset"),l.Sb(5,"legend",3),l.Kc(6,"Login"),l.Qb(),l.Sb(7,"div",4),l.Sb(8,"div",5),l.Pb(9),l.Sb(10,"label",6),l.Kc(11,"Username"),l.Qb(),l.Nb(12,"input",7),l.Sb(13,"div",8),l.Sb(14,"div",9),l.Kc(15," Username is required. "),l.Qb(),l.Sb(16,"div",9),l.Kc(17),l.Qb(),l.Sb(18,"div",9),l.Kc(19),l.Qb(),l.Qb(),l.Ob(),l.Pb(20),l.Sb(21,"label",10),l.Kc(22,"Password"),l.Qb(),l.Nb(23,"input",11),l.Sb(24,"div",8),l.Sb(25,"div",9),l.Kc(26," Password is required. "),l.Qb(),l.Sb(27,"div",9),l.Kc(28),l.Qb(),l.Sb(29,"div",9),l.Kc(30),l.Qb(),l.Qb(),l.Ob(),l.Qb(),l.Sb(31,"button",12),l.ec("click",(function(e){return r.sanitizeData()})),l.Kc(32," Login "),l.Qb(),l.Qb(),l.Qb(),l.Sb(33,"div",13),l.Kc(34," Don't have an account? Register "),l.Sb(35,"a",14),l.Kc(36,"here"),l.Qb(),l.Kc(37,"! "),l.Qb(),l.Ic(38,h,2,1,"div",15),l.Qb(),l.Qb(),l.Ob()),2&e&&(l.yb(1),l.pc("loading",r.loading),l.yb(2),l.pc("formGroup",r.loginForm),l.yb(10),l.pc("hidden",!(r.Username.touched&&r.Username.invalid)),l.yb(1),l.pc("hidden",!(null!=r.Username.errors&&r.Username.errors.required)),l.yb(2),l.pc("hidden",!(null!=r.Username.errors&&r.Username.errors.minlength)),l.yb(1),l.Nc(" Username is too short (min: ",r.lengths.username[0],", current: ",r.Username.value.length,"). "),l.yb(1),l.pc("hidden",!(null!=r.Username.errors&&r.Username.errors.maxlength)),l.yb(1),l.Nc(" Username is too long (max: ",r.lengths.username[1],", current: ",r.Username.value.length,"). "),l.yb(5),l.pc("hidden",!(r.Password.touched&&r.Password.invalid)),l.yb(1),l.pc("hidden",!(null!=r.Password.errors&&r.Password.errors.required)),l.yb(2),l.pc("hidden",!(null!=r.Password.errors&&r.Password.errors.minlength)),l.yb(1),l.Nc(" Password is too short (min: ",r.lengths.password[0],", current: ",r.Password.value.length,"). "),l.yb(1),l.pc("hidden",!(null!=r.Password.errors&&r.Password.errors.maxlength)),l.yb(1),l.Nc(" Password is too long (max: ",r.lengths.password[1],", current: ",r.Password.value.length,"). "),l.yb(1),l.pc("disabled",!r.loginForm.valid||r.loading||r.firedOff),l.yb(4),l.pc("routerLink",l.tc(21,b)),l.yb(3),l.pc("ngIf",r.loginFail))},directives:[u.a,s.u,s.m,s.f,s.a,s.l,s.d,m.a,g.a,p.g,t.o],styles:["#form-container[_ngcontent-%COMP%]{margin:0 auto;padding-top:1rem;width:32vw}@media only screen and (min-width:100px)and (max-width:992px){#form-container[_ngcontent-%COMP%]{width:45vw}}@media only screen and (min-width:991px)and (max-width:762px){#form-container[_ngcontent-%COMP%]{width:55vw}}@media only screen and (min-width:761px)and (max-width:703px){#form-container[_ngcontent-%COMP%]{width:63vw}}@media only screen and (min-width:0)and (max-width:702px){#form-container[_ngcontent-%COMP%]{width:70vw}}#border-container[_ngcontent-%COMP%]{background-color:#fff;padding:14px}label[_ngcontent-%COMP%]{padding-top:1rem}"]}),e})(),canActivate:[n("Dat7").a]}];let w=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(r){return new(r||e)},imports:[[p.h.forChild(f)],p.h]}),e})();var y=n("FUS3"),v=n("WjtB");n.d(r,"LoginModule",(function(){return S}));let S=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(r){return new(r||e)},providers:[d.a,i.a],imports:[[t.c,w,y.a,v.a,s.q]]}),e})()}}]);