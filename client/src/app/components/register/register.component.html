<ng-container>
  <spinners-gif-spinner [loading]="loading"></spinners-gif-spinner>
  <div class="container text-center" id="form-container">
    <form
      (ngSubmit)="register()"
      [formGroup]="registerForm"
      name="registerForm"
      autocomplete="on"
    >
      <fieldset>
        <legend class="pt-2 pb-2 text-center">Register</legend>
        <div class="border rounded" id="border-container">
          <div class="form-group">
            <ng-container>
              <label for="name" class="font-weight-bold">Name</label>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                formControlName="name"
                autocomplete="name"
                placeholder="Optional"
              />
              <div
                [hidden]="!(Name.touched && Name.invalid)"
                appAlert
                alertType="warning"
              >
                <div [hidden]="!Name.errors?.minlength">
                  Name is too short (min: 1, current: {{ Name.value.length }}).
                </div>
                <div [hidden]="!Name.errors?.maxlength">
                  Name is too long (max: 100, current: {{ Name.value.length }}).
                </div>
              </div>
            </ng-container>
            <ng-container>
              <label for="username" class="font-weight-bold">Username</label>
              <input
                type="text"
                class="form-control"
                id="username"
                name="username"
                formControlName="username"
                autocomplete="username"
                placeholder="Required"
              />
              <div
                [hidden]="!(Username.touched && Username.invalid)"
                appAlert
                alertType="warning"
              >
                <div [hidden]="!Username.errors?.required">
                  Username is required.
                </div>
                <div [hidden]="!Username.errors?.minlength">
                  Username is too short (min: 3, current:
                  {{ Username.value.length }}).
                </div>
                <div [hidden]="!Username.errors?.maxlength">
                  Username is too long (max: 22, current:
                  {{ Username.value.length }}).
                </div>
              </div>
            </ng-container>
            <ng-container>
              <label for="password" class="font-weight-bold">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                formControlName="password"
                autocomplete="new-password"
                placeholder="Required"
              />
              <div
                [hidden]="!(Password.touched && Password.invalid)"
                appAlert
                alertType="warning"
              >
                <div [hidden]="!Password.errors?.required">
                  Password is required.
                </div>
                <div [hidden]="!Password.errors?.minlength">
                  Password is too short (min: 8, current:
                  {{ Password.value.length }}).
                </div>
                <div [hidden]="!Password.errors?.maxlength">
                  Password is too long (max: 256, current:
                  {{ Password.value.length }}).
                </div>
              </div>
            </ng-container>
          </div>

          <button
            type="submit"
            appBtn
            btnType="success"
            (click)="sanitizeData()"
            [disabled]="!registerForm.valid || firedOff"
          >
            Register
          </button>
        </div>
      </fieldset>
      <div class="mt-2 mb-2" appAlert alertType="info">
        Already have an account? Click
        <a [routerLink]="['/', 'login']">here</a> to login.
      </div>
      <div class="mt-1" *ngIf="registerFail" appAlert alertType="danger">
        {{ registerFail }}
      </div>
    </form>
  </div>
</ng-container>
