<ng-container>
  <spinners-gif-spinner [loading]="loading"></spinners-gif-spinner>
  <div class="container text-center" id="form-container">
    <form
      (ngSubmit)="login()"
      [formGroup]="loginForm"
      name="loginForm"
      autocomplete="on"
    >
      <fieldset>
        <legend class="pt-2 pb-2 text-center">Login</legend>
        <div class="border rounded shadow" id="border-container">
          <div class="form-group">
            <ng-container>
              <label for="username" class="font-weight-bold">Username</label>
              <input
                type="text"
                class="form-control"
                id="username"
                name="username"
                formControlName="username"
                autocomplete="username"
              />
              <div
                [hidden]="!(Username.touched && Username.invalid)"
                appAlert
                alertType="warning"
              >
                <div [hidden]="!Username.errors?.required">
                  Username is required.
                </div>
                <div [hidden]="!Username.errors?.minlength">
                  Username is too short (min: {{ lengths.username[0] }},
                  current: {{ Username.value.length }}).
                </div>
                <div [hidden]="!Username.errors?.maxlength">
                  Username is too long (max: {{ lengths.username[1] }}, current:
                  {{ Username.value.length }}).
                </div>
              </div>
            </ng-container>
            <ng-container>
              <label for="password" class="font-weight-bold">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                formControlName="password"
                autocomplete="current-password"
              />
              <div
                [hidden]="!(Password.touched && Password.invalid)"
                appAlert
                alertType="warning"
              >
                <div [hidden]="!Password.errors?.required">
                  Password is required.
                </div>
                <div [hidden]="!Password.errors?.minlength">
                  Password is too short (min: {{ lengths.password[0] }},
                  current: {{ Password.value.length }}).
                </div>
                <div [hidden]="!Password.errors?.maxlength">
                  Password is too long (max: {{ lengths.password[1] }}, current:
                  {{ Password.value.length }}).
                </div>
              </div>
            </ng-container>
          </div>

          <button
            type="submit"
            appBtn
            btnType="success"
            (click)="sanitizeData()"
            [disabled]="!loginForm.valid || loading || firedOff"
          >
            Login
          </button>
        </div>
      </fieldset>

      <div class="mt-2 mb-2" appAlert alertType="info" [shadow]="true">
        Don't have an account? Register
        <a [routerLink]="['/', 'register']">here</a>!
      </div>
      <div
        class="mt-1"
        *ngIf="loginFail"
        appAlert
        alertType="danger"
        [shadow]="true"
      >
        {{ loginFail }}
      </div>
    </form>
  </div>
</ng-container>
